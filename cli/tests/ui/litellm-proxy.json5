{
  manifest_version: "0.1.0",
  program: {
    image: "nginx:1.27-alpine",
    entrypoint: [
      "sh",
      "-lc",
      "cat > /etc/nginx/conf.d/default.conf <<EOF\nserver {\n  listen 8081;\n  location / {\n    proxy_pass $BACKEND_URL/v1$request_uri;\n  }\n}\nserver {\n  listen 8082;\n  location / {\n    proxy_pass $BACKEND_URL/api$request_uri;\n  }\n}\nEOF\nnginx -g 'daemon off;'",
    ],
    env: {
      BACKEND_URL: "${slots.backend.url}",
    },
    network: {
      endpoints: [
        { name: "router", port: 8081 },
        { name: "admin-api", port: 8082 },
      ],
    },
  },
  slots: {
    backend: { kind: "http" },
  },
  provides: {
    llm: { kind: "llm", endpoint: "router" },
    admin_api: { kind: "http", endpoint: "admin-api" },
  },
  exports: { llm: "llm", admin_api: "admin_api" },
}
